generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email     String   @unique
  hash      String
  firstName String
  lastName  String
  surveys   Survey[]
}

model Survey {
  id        String       @id @default(uuid())
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  title     String
  status    SurveyStatus
  createdBy String
  questions Question[]
  user      User         @relation(fields: [createdBy], references: [id])
}

model Question {
  id          String       @id @default(uuid())
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  type        QuestionType
  surveyId    String
  preferences Json?
  title       String
  optional    Boolean      @default(true)
  survey      Survey       @relation(fields: [surveyId], references: [id])
  no          Int
}

enum SurveyStatus {
  DRAFT
  PUBLIC
  PRIVATE
  CLOSED
}

enum QuestionType {
  TEXT
  SCALE
  MULTIPLE_CHOICE
  SINGLE_CHOICE
}
